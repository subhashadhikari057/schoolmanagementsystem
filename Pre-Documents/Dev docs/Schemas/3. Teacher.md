### üóÇÔ∏è Tables Overview

| Table Name         | Purpose                                                       |
| ------------------ | ------------------------------------------------------------- |
| `teachers`         | Core teacher records linked to user identity and role details |
| `teacher_subjects` | Many-to-many mapping of teachers to subjects they teach       |
| `teacher_profiles` | Extended teacher metadata and profile info                    |

---

## üìÑ Schema Definitions¬†(PostgreSQL + SQL DDL)

---

### üßë‚Äçüè´ `teachers`

```sql
-- Strict enumeration to avoid misspellings like ‚Äúresigend‚Äù
CREATE TYPE teacher_employment_status AS ENUM (
    'active',
    'on_leave',
    'resigned',
    'terminated'
);

CREATE TABLE teacher.teachers (
    id          UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id     UUID UNIQUE NOT NULL
                   REFERENCES auth.users(id) ON DELETE CASCADE,

    designation      VARCHAR(100),
    qualification    TEXT,
    employment_date  DATE,

    -- ‚úî ENUM ensures controlled values
    employment_status teacher_employment_status DEFAULT 'active',

    department  VARCHAR(100),
    additional_metadata JSONB DEFAULT '{}',

    created_at TIMESTAMPTZ DEFAULT now(),
    updated_at TIMESTAMPTZ,
    deleted_at TIMESTAMPTZ,

    created_by UUID REFERENCES auth.users(id),
    updated_by UUID REFERENCES auth.users(id),
    deleted_by UUID REFERENCES auth.users(id)
);

CREATE INDEX idx_teachers_user_id    ON teacher.teachers(user_id);
CREATE INDEX idx_teachers_created_by ON teacher.teachers(created_by);
CREATE INDEX idx_teachers_updated_by ON teacher.teachers(updated_by);
CREATE INDEX idx_teachers_deleted_by ON teacher.teachers(deleted_by);
```

---

### üìö `teacher_subjects`

```sql
CREATE TABLE teacher.teacher_subjects (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),

    teacher_id UUID NOT NULL
        REFERENCES teacher.teachers(id)  ON DELETE CASCADE,
    subject_id UUID NOT NULL
        REFERENCES academics.subjects(id) ON DELETE CASCADE,

    assigned_at TIMESTAMPTZ DEFAULT now(),

    created_at TIMESTAMPTZ DEFAULT now(),
    updated_at TIMESTAMPTZ,
    deleted_at TIMESTAMPTZ,

    created_by UUID REFERENCES auth.users(id),
    updated_by UUID REFERENCES auth.users(id),
    deleted_by UUID REFERENCES auth.users(id),

    CONSTRAINT unique_teacher_subject
      UNIQUE (teacher_id, subject_id)
);

CREATE INDEX idx_teacher_subjects_teacher_id ON teacher.teacher_subjects(teacher_id);
CREATE INDEX idx_teacher_subjects_subject_id ON teacher.teacher_subjects(subject_id);
CREATE INDEX idx_teacher_subjects_created_by  ON teacher.teacher_subjects(created_by);
CREATE INDEX idx_teacher_subjects_updated_by  ON teacher.teacher_subjects(updated_by);
CREATE INDEX idx_teacher_subjects_deleted_by  ON teacher.teacher_subjects(deleted_by);
```

---

### üìá `teacher_profiles`

```sql
CREATE TABLE teacher.teacher_profiles (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),

    teacher_id UUID UNIQUE NOT NULL
        REFERENCES teacher.teachers(id) ON DELETE CASCADE,

    bio               TEXT,
    profile_photo_url TEXT,
    contact_info      JSONB DEFAULT '{}'::jsonb, -- { phone, email, address }
    social_links      JSONB DEFAULT '{}'::jsonb, -- { linkedin, twitter, ‚Ä¶ }
    additional_data   JSONB DEFAULT '{}'::jsonb,

    created_at TIMESTAMPTZ DEFAULT now(),
    updated_at TIMESTAMPTZ,
    deleted_at TIMESTAMPTZ,

    created_by UUID REFERENCES auth.users(id),
    updated_by UUID REFERENCES auth.users(id),
    deleted_by UUID REFERENCES auth.users(id)
);

CREATE INDEX idx_teacher_profiles_teacher_id ON teacher.teacher_profiles(teacher_id);
CREATE INDEX idx_teacher_profiles_created_by ON teacher.teacher_profiles(created_by);
CREATE INDEX idx_teacher_profiles_updated_by ON teacher.teacher_profiles(updated_by);
CREATE INDEX idx_teacher_profiles_deleted_by ON teacher.teacher_profiles(deleted_by);
```

---

## üìå Indexing & Auditing Best Practices

- **One-to-one integrity:** `user_id` is unique per teacher.
- **Pivot table:** `teacher_subjects` models many-to-many relations with a composite UNIQUE constraint.
- **ENUM enforcement:** `employment_status` limited to `active | on_leave | resigned | terminated` ‚Äî prevents typo bugs.
- **Audit trail:** every table includes `created_by / updated_by / deleted_by` foreign keys plus soft-delete (`deleted_at`).
- **JSONB columns** allow flexible profile/metadata storage without schema churn while core attributes stay normalized.
