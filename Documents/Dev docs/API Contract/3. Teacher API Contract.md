
### üìò API Contract ‚Äî `Teacher Module`

> Version: `v1`  
> Base Path: `/api/v1/teachers`  
> Auth Required: ‚úÖ Yes (JWT)  
> Roles Permitted: `Admin`, `Teacher` (self-only), `SuperAdmin`, `Student` (view only)

---

### üîê Access Control Rules

|Action|Role|Scope|
|---|---|---|
|List teachers|Admin|All teachers|
|Create teacher|Admin|Full creation|
|Get teacher by ID|Admin, Teacher, Student|All teachers / own profile / view-only|
|Update teacher|Admin, Teacher|Full (Admin) / Partial (self-edit by teacher)|
|Delete (soft) teacher|Admin|All teachers|
|View own profile|Teacher|Self|
|Assign subjects|Admin|Assign subjects to any teacher|
|Remove subject|Admin|Unassign subject from teacher|
|View assigned subjects|Teacher, Admin|Teacher views own / Admin views any|
|List teacher‚Äôs classes|Admin, Teacher|All assigned classes|

---

### üìö Endpoint Catalog

|Method|Path|Description|Auth & Roles|
|---|---|---|---|
|GET|`/teachers`|List all teachers|Admin|
|POST|`/teachers`|Create a new teacher record|Admin|
|GET|`/teachers/:id`|Get full teacher record|Admin, Teacher, Student|
|PUT|`/teachers/:id`|Update teacher info|Admin (all), Teacher (self)|
|DELETE|`/teachers/:id`|Soft-delete teacher|Admin|
|GET|`/teachers/:id/profile`|Get profile info|Admin, Teacher|
|GET|`/teachers/:id/subjects`|List assigned subjects|Admin, Teacher|
|POST|`/teachers/:id/subjects`|Assign subjects to teacher|Admin|
|DELETE|`/teachers/:id/subjects/:subject_id`|Unassign subject from teacher|Admin|
|GET|`/teachers/:id/classes`|List classes the teacher teaches|Admin, Teacher|
|GET|`/teachers/me`|Get logged-in teacher‚Äôs profile|Teacher|
|PUT|`/teachers/me`|Update logged-in teacher‚Äôs own profile|Teacher|

---

### üßæ TypeScript Schemas

#### üõ†Ô∏è `CreateTeacherRequest`

```ts
interface CreateTeacherRequest {
  user: {
    full_name: string;
    email: string;
    phone?: string;
    password: string;
  };
  profile: {
    qualification: string;
    designation?: string;
    experience_years?: number;
    date_of_joining: string; // ISO (YYYY-MM-DD)
    bio?: string;
  };
}
```

#### ‚úÖ `TeacherResponse`

```ts
interface TeacherResponse {
  id: string;
  user_id: string;
  full_name: string;
  email: string;
  phone?: string;
  profile: {
    qualification: string;
    designation?: string;
    experience_years?: number;
    date_of_joining: string;
    bio?: string;
  };
  subjects: SubjectSummary[];
  created_at: string;
  updated_at: string;
  deleted_at?: string | null;
}
```

#### üõ†Ô∏è `UpdateTeacherRequest`

```ts
interface UpdateTeacherRequest {
  full_name?: string;
  phone?: string;
  profile?: {
    qualification?: string;
    designation?: string;
    experience_years?: number;
    date_of_joining?: string;
    bio?: string;
  };
}
```

#### üõ†Ô∏è `AssignSubjectsRequest`

```ts
interface AssignSubjectsRequest {
  subject_ids: string[]; // UUIDs of subjects
}
```

#### ‚úÖ `SubjectSummary`

```ts
interface SubjectSummary {
  id: string;
  name: string;
  code: string;
  class_ids?: string[];
}
```

---

### ‚ö†Ô∏è Standard Error Object

```ts
interface ErrorResponse {
  statusCode: number;
  error: string;
  message: string;
  code?: string; // e.g., TEACHER_NOT_FOUND, SUBJECT_ALREADY_ASSIGNED
}
```

---

### üîê Security Headers

All endpoints require:

```http
Authorization: Bearer <JWT_TOKEN>
Content-Type: application/json
```

Optional but recommended:

```http
X-Request-ID: <uuid>
```

---

### üîó Notes on Relations

- `user_id` links to global `users` table
    
- `subjects` comes from many-to-many `teacher_subjects`
    
- Teachers may be assigned to multiple classes/sections via schedule or mapping table
    
- Profile fields are in `teacher_profiles` table
    

---

### ‚úÖ Role Constraints + Guards

#### Admin

- Can perform full CRUD on all teachers
    
- Can assign/unassign subjects
    

#### Teacher

- Can only GET/PUT their own `/me` or `/teachers/:own_id`
    
- Cannot modify others
    

#### Student

- Can only view teachers (readonly): `/teachers/:id`, `/teachers`
    

---

### üìã Sample Flows

#### 1. Create a Teacher

- **Request:** `POST /teachers`
    

```json
{
  "user": {
    "full_name": "Ms. Leena Sharma",
    "email": "leena@school.edu",
    "password": "securePass123"
  },
  "profile": {
    "qualification": "M.Ed",
    "designation": "Senior Lecturer",
    "experience_years": 8,
    "date_of_joining": "2020-05-10"
  }
}
```

- **Response:** `200 OK` ‚Üí `TeacherResponse`
    

---

#### 2. Assign Subjects to Teacher

- **Request:** `POST /teachers/:id/subjects`
    

```json
{
  "subject_ids": ["subj-001", "subj-002"]
}
```

- **Response:** `200 OK` ‚Üí `SubjectSummary[]`
    

---

#### 3. Fetch Logged-in Teacher Profile

- **Request:** `GET /teachers/me`
    
- **Response:** `200 OK` ‚Üí `TeacherResponse`
    

---
